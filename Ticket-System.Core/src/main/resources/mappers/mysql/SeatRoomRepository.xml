<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apps.mybatis.mysql.SeatRoomRepository">

    <select id="findAll" resultType="com.apps.domain.entity.SeatRoom">
        select * from seat_room limit #{limit} offset #{offset};
    </select>

    <select id="findByRoomId" resultType="com.apps.domain.entity.SeatRoom">
        select * from seat_room where room_id = #{roomId};
    </select>

    <select id="findByAll" resultType="com.apps.domain.entity.SeatRoom">
        select * from seat_room where room_id = #{roomId} and
            seat_id = #{seatId} and showtimes_detail_id = #{showTimesDetailId}
            and tier_id = #{tierId};
    </select>


    <select id="findSeatInRoomByShowTimes" resultType="com.apps.domain.entity.SeatDataRoom">
        select  t.room_id as roomId ,t.id as tierId ,s.id as seatId,
                seat_room.id as seatRoomId,
                t.name as tierName , s.name as seatName,  seat_room.status,
                s.price, r.horizontal_size as horizontalSize,
                r.vertical_size  as verticalSize
        from booksystem.seat_room
                 right join seat s on s.id = seat_room.seat_id
                 join booksystem.tier t on s.tier_id = t.id
                 join booksystem.room r on t.room_id = r.id
        where showtimes_detail_id = #{id}  order by t.name;
    </select>
<!--    <update id="reservingSeat" statementType="CALLABLE">-->
<!--        {-->
<!--            call clockSeatRoom(#{id, mode = IN, jdbcType = INTEGER})-->
<!--        }-->
<!--    </update>-->

</mapper>